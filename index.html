<!DOCTYPE html>
<html lang="en-US">
  <head>
    <!-- App Assets -->
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="./icons/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="./icons/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="./icons/favicon-16x16.png"
    />
    <link rel="manifest" href="./app.webmanifest" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <!-- Reset CSS -->
    <style>
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
      }
    </style>
  </head>
  <body>
    <!-- Set title, description, keyword from app manifest -->
    <script type="module">
      fetch(new URL("./app.webmanifest", import.meta.url))
        .then((res) => res.json())
        .then((manifest) => {
          document.title = manifest.name;
          document.getElementsByTagName("meta")["keywords"].content =
            manifest.keywords;
          document.getElementsByTagName("meta")["description"].content =
            manifest.description;
        })
        .catch((e) => {
          alert("Failed to get app info");
          console.error(new Error(e));
        });
    </script>

    <script type="module">
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          const url = new URL("service-worker.js", import.meta.url);
          navigator.serviceWorker
            .register(url, {
              type: "module",
            })
            .then(
              (registration) => {
                console.log(
                  "ServiceWorker registration successful with scope: ",
                  registration.scope
                );
              },
              (error) => {
                console.log("ServiceWorker registration failed: ", error);
              }
            );
        });
      }
    </script>

    <script type="module">
      import "./entry.js";
    </script>
  </body>
</html>
